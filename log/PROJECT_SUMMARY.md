# ğŸ‰ Code996 Online Analysis Module - Project Summary

## âœ… é¡¹ç›®å®Œæˆæƒ…å†µ

### å·²å®Œæˆçš„åŠŸèƒ½

âœ… **å®Œæ•´çš„åç«¯æœåŠ¡ï¼ˆJava Spring Bootï¼‰**
- REST API ç”¨äºåœ¨çº¿ Git åˆ†æ
- ä½¿ç”¨ JGit è¿›è¡Œ Git æ“ä½œ
- è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- CORS è·¨åŸŸæ”¯æŒ
- å¯é…ç½®çš„åˆ†æå‚æ•°

âœ… **å‰ç«¯é›†æˆç»„ä»¶ï¼ˆVue 3 + TypeScriptï¼‰**
- API å®¢æˆ·ç«¯å°è£…
- ç‹¬ç«‹çš„åœ¨çº¿åˆ†æç»„ä»¶
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- åç«¯çŠ¶æ€æ£€æµ‹
- ç¤ºä¾‹ä»“åº“å¿«é€Ÿæµ‹è¯•

âœ… **å®Œæ•´çš„æ–‡æ¡£**
- ä¸»æ–‡æ¡£ï¼ˆREADME.mdï¼‰
- å¿«é€Ÿå¼€å§‹æŒ‡å—ï¼ˆQUICKSTART.mdï¼‰
- API ç¤ºä¾‹æ–‡æ¡£ï¼ˆEXAMPLES.mdï¼‰
- åç«¯å­æ–‡æ¡£
- å‰ç«¯å­æ–‡æ¡£

âœ… **å·¥å…·è„šæœ¬**
- Windows å¯åŠ¨è„šæœ¬ï¼ˆstart.batï¼‰
- Linux/Mac å¯åŠ¨è„šæœ¬ï¼ˆstart.shï¼‰
- .gitignore é…ç½®

---

## ğŸ“ å®Œæ•´çš„é¡¹ç›®ç»“æ„

```
src/log/                                    # æ‰€æœ‰ä»£ç éƒ½åœ¨æ­¤ç›®å½•å†…
â”‚
â”œâ”€â”€ backend/                                # Java Spring Boot åç«¯
â”‚   â”œâ”€â”€ pom.xml                            # Maven é…ç½®
â”‚   â”œâ”€â”€ start.bat                          # Windows å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start.sh                           # Linux/Mac å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ .gitignore                         # Git å¿½ç•¥æ–‡ä»¶
â”‚   â”œâ”€â”€ README.md                          # åç«¯æ–‡æ¡£
â”‚   â”‚
â”‚   â””â”€â”€ src/main/
â”‚       â”œâ”€â”€ java/com/code996/
â”‚       â”‚   â”œâ”€â”€ Code996Application.java    # ä¸»åº”ç”¨
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ controller/
â”‚       â”‚   â”‚   â””â”€â”€ AnalysisController.java    # REST API æ§åˆ¶å™¨
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ service/
â”‚       â”‚   â”‚   â””â”€â”€ GitAnalysisService.java    # Git åˆ†ææœåŠ¡
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ model/
â”‚       â”‚   â”‚   â”œâ”€â”€ AnalysisRequest.java       # è¯·æ±‚æ¨¡å‹
â”‚       â”‚   â”‚   â”œâ”€â”€ AnalysisResult.java        # å“åº”æ¨¡å‹
â”‚       â”‚   â”‚   â””â”€â”€ ApiResponse.java           # API åŒ…è£…å™¨
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ util/
â”‚       â”‚   â”‚   â””â”€â”€ GitHelper.java             # Git å·¥å…·ç±»
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ config/
â”‚       â”‚       â””â”€â”€ CleanupScheduler.java      # å®šæ—¶æ¸…ç†ä»»åŠ¡
â”‚       â”‚
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application.yml            # åº”ç”¨é…ç½®
â”‚
â”œâ”€â”€ frontend/                               # Vue 3 å‰ç«¯é›†æˆ
â”‚   â”œâ”€â”€ api.ts                             # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ OnlineAnalysis.vue                 # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ package.json                       # åŒ…ä¿¡æ¯
â”‚   â””â”€â”€ README.md                          # å‰ç«¯æ–‡æ¡£
â”‚
â”œâ”€â”€ README.md                               # ä¸»æ–‡æ¡£
â”œâ”€â”€ QUICKSTART.md                          # å¿«é€Ÿå¼€å§‹
â””â”€â”€ EXAMPLES.md                            # ç¤ºä¾‹æ–‡æ¡£
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### åç«¯ç‰¹æ€§
- âœ… **åœ¨çº¿åˆ†æ** - è¾“å…¥ Git URL å³å¯åˆ†æï¼Œæ— éœ€æœ¬åœ°å…‹éš†
- âœ… **JGit é›†æˆ** - ä½¿ç”¨ Eclipse JGit è¿›è¡Œå¯é çš„ Git æ“ä½œ
- âœ… **RESTful API** - æ¸…æ™°ç®€æ´çš„ REST API è®¾è®¡
- âœ… **è‡ªåŠ¨æ¸…ç†** - å®šæ—¶æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼ˆæ¯ 10 åˆ†é’Ÿï¼‰
- âœ… **CORS æ”¯æŒ** - æ”¯æŒè·¨åŸŸè¯·æ±‚
- âœ… **å¯é…ç½®** - YAML é…ç½®æ–‡ä»¶ï¼Œæ˜“äºå®šåˆ¶
- âœ… **è½»é‡çº§** - æ— æ•°æ®åº“ï¼Œæ— è®¤è¯è´Ÿæ‹…

### åˆ†ææŒ‡æ ‡
- ğŸ“Š **æ—¶é—´åˆ†å¸ƒ** - æŒ‰å°æ—¶ï¼ˆ0-23ï¼‰å’Œæ˜ŸæœŸï¼ˆå‘¨ä¸€è‡³å‘¨æ—¥ï¼‰
- ğŸ“Š **996 æŒ‡æ•°** - è®¡ç®—å·¥ä½œå¼ºåº¦æŒ‡æ•°
- ğŸ“Š **å·¥ä½œç±»å‹** - åˆ†ç±»ä¸º 995/996/007/å¼€æº
- ğŸ“Š **åŠ ç­æ¯”ä¾‹** - å·¥ä½œæ—¶é—´å¤–æäº¤æ¯”ä¾‹
- ğŸ“Š **è´¡çŒ®è€…** - Top 10 è´¡çŒ®è€…ç»Ÿè®¡
- ğŸ“Š **è¯¦ç»†ç»Ÿè®¡** - å·¥ä½œæ—¥/å‘¨æœ«ã€å·¥ä½œæ—¶é—´/éå·¥ä½œæ—¶é—´æäº¤æ•°

### å‰ç«¯ç‰¹æ€§
- âœ… **Vue 3 ç»„ä»¶** - ä½¿ç”¨ Composition API
- âœ… **TypeScript** - ç±»å‹å®‰å…¨çš„ API å®¢æˆ·ç«¯
- âœ… **å®æ—¶è¿›åº¦** - åˆ†æè¿›åº¦å®æ—¶æ˜¾ç¤º
- âœ… **çŠ¶æ€æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹åç«¯æœåŠ¡çŠ¶æ€
- âœ… **ç¤ºä¾‹ä»“åº“** - å†…ç½®ç¤ºä¾‹å¿«é€Ÿæµ‹è¯•
- âœ… **é”™è¯¯å¤„ç†** - å‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åç«¯ï¼ˆå¿…éœ€ï¼‰

**Windows:**
```bash
cd src\log\backend
start.bat
```

**Linux/Mac:**
```bash
cd src/log/backend
chmod +x start.sh
./start.sh
```

æˆ–è€…ä½¿ç”¨ Mavenï¼š
```bash
cd src/log/backend
mvn spring-boot:run
```

### 2. æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/api/analyze/health

# åˆ†æä»“åº“
curl -X POST http://localhost:8080/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"gitUrl": "https://github.com/expressjs/express.git", "maxCommits": 1000}'
```

### 3. ä½¿ç”¨å‰ç«¯ç»„ä»¶ï¼ˆå¯é€‰ï¼‰

```typescript
// å¯¼å…¥ API å®¢æˆ·ç«¯
import { analyzeRepository } from '@/log/frontend/api'

// åˆ†æä»“åº“
const result = await analyzeRepository({
  gitUrl: 'https://github.com/user/repo.git',
  maxCommits: 5000
})
```

æˆ–è€…ç›´æ¥ä½¿ç”¨ Vue ç»„ä»¶ï¼š
```vue
<template>
  <OnlineAnalysis />
</template>

<script setup>
import OnlineAnalysis from '@/log/frontend/OnlineAnalysis.vue'
</script>
```

---

## ğŸ“– API æ–‡æ¡£

### æ¥å£åˆ—è¡¨

1. **å¥åº·æ£€æŸ¥**
   - `GET /api/analyze/health`
   - æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ

2. **æœåŠ¡ä¿¡æ¯**
   - `GET /api/analyze/info`
   - è·å–æœåŠ¡ç‰ˆæœ¬å’Œä¿¡æ¯

3. **åˆ†æä»“åº“**
   - `POST /api/analyze`
   - åˆ†æ Git ä»“åº“

### è¯·æ±‚æ ¼å¼

```json
{
  "gitUrl": "https://github.com/user/repo.git",
  "branch": "main",              // å¯é€‰
  "maxCommits": 5000,            // å¯é€‰
  "authorEmail": "user@email"    // å¯é€‰
}
```

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "Analysis completed",
  "data": {
    "repositoryName": "repo",
    "totalCommits": 1234,
    "timeRange": { ... },
    "hourDistribution": [ ... ],
    "weekDistribution": [ ... ],
    "statistics": {
      "index996": 38.5,
      "workingType": "996",
      "overtimeRatio": 45.2,
      ...
    },
    "topContributors": [ ... ]
  },
  "timestamp": 1702468800000
}
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯
- **Java** 11+
- **Spring Boot** 2.7.18
- **Eclipse JGit** 6.8.0
- **Maven** 3.6+
- **Lombok** (å‡å°‘æ ·æ¿ä»£ç )
- **Apache Commons IO** (æ–‡ä»¶æ“ä½œ)

### å‰ç«¯
- **Vue** 3
- **TypeScript**
- **Composition API**
- **Fetch API**

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

### åç«¯ä»£ç 
- **Java æ–‡ä»¶**: 9 ä¸ª
- **æ€»è¡Œæ•°**: ~800 è¡Œ
- **åŒ…å«**:
  - ä¸»åº”ç”¨ç±» Ã— 1
  - æ§åˆ¶å™¨ Ã— 1
  - æœåŠ¡ç±» Ã— 1
  - æ¨¡å‹ç±» Ã— 3
  - å·¥å…·ç±» Ã— 1
  - é…ç½®ç±» Ã— 1

### å‰ç«¯ä»£ç 
- **TypeScript/Vue æ–‡ä»¶**: 2 ä¸ª
- **æ€»è¡Œæ•°**: ~600 è¡Œ
- **åŒ…å«**:
  - API å®¢æˆ·ç«¯ Ã— 1
  - Vue ç»„ä»¶ Ã— 1

### æ–‡æ¡£
- **Markdown æ–‡ä»¶**: 7 ä¸ª
- **æ€»è¡Œæ•°**: ~1500 è¡Œ

---

## ğŸ¨ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: å¿«é€ŸæŸ¥çœ‹å¼€æºé¡¹ç›®
```bash
# åˆ†æ Vue.js çš„å·¥ä½œæ¨¡å¼
curl -X POST http://localhost:8080/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"gitUrl": "https://github.com/vuejs/core.git", "maxCommits": 3000}'
```

### åœºæ™¯ 2: å›¢é˜Ÿç”Ÿäº§åŠ›åˆ†æ
åˆ†æå›¢é˜Ÿä»“åº“äº†è§£å·¥ä½œæ¨¡å¼ï¼Œè¯†åˆ«æ½œåœ¨çš„è¿‡åº¦å·¥ä½œé£é™©ã€‚

### åœºæ™¯ 3: å¼€æºé¡¹ç›®ç ”ç©¶
åœ¨è´¡çŒ®ä¹‹å‰ï¼Œåˆ†æé¡¹ç›®çš„æäº¤æ¨¡å¼ä»¥äº†è§£å›¢é˜Ÿæ´»è·ƒåº¦ã€‚

### åœºæ™¯ 4: é¡¹ç›®å¥åº·ç›‘æ§
å®šæœŸåˆ†æé¡¹ç›®ï¼Œè·Ÿè¸ªå¼€å‘å¼ºåº¦ï¼Œç¡®ä¿å¯æŒç»­çš„å·¥ä½œå®è·µã€‚

---

## âš™ï¸ é…ç½®è¯´æ˜

ç¼–è¾‘ `backend/src/main/resources/application.yml`:

```yaml
server:
  port: 8080                    # åç«¯ç«¯å£

code996:
  temp-dir: /tmp/code996        # ä¸´æ—¶ç›®å½•
  max-repo-size: 500            # æœ€å¤§ä»“åº“å¤§å°ï¼ˆMBï¼‰
  analysis-timeout: 300         # åˆ†æè¶…æ—¶ï¼ˆç§’ï¼‰
  max-commits: 10000            # æœ€å¤§æäº¤æ•°
  cleanup-interval: 30          # æ¸…ç†é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: åç«¯å¯åŠ¨å¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥ Java ç‰ˆæœ¬ï¼ˆéœ€è¦ 11+ï¼‰å’Œ Maven æ˜¯å¦å®‰è£…

### Q2: åˆ†æè¶…æ—¶ï¼Ÿ
**A**: å‡å°‘ `maxCommits` æˆ–å¢åŠ é…ç½®ä¸­çš„ `analysis-timeout`

### Q3: CORS é”™è¯¯ï¼Ÿ
**A**: æ£€æŸ¥ `application.yml` ä¸­çš„ CORS é…ç½®

### Q4: å†…å­˜ä¸è¶³ï¼Ÿ
**A**: å¢åŠ  JVM å †å†…å­˜ï¼š`java -Xmx2g -jar app.jar`

---

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **å®Œå…¨ç‹¬ç«‹** - æ‰€æœ‰ä»£ç åœ¨ `src/log/` å†…
2. **é›¶ä¾µå…¥** - ä¸ä¿®æ”¹ä»»ä½•å¤–éƒ¨æ–‡ä»¶
3. **è½»é‡çº§** - æ— æ•°æ®åº“ï¼Œæ— å¤æ‚è®¤è¯
4. **æ˜“äºä½¿ç”¨** - æ¸…æ™°çš„ APIï¼Œå®Œæ•´çš„æ–‡æ¡£
5. **å¯æ‰©å±•** - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½

---

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

- **å°å‹ä»“åº“** (< 1000 commits): ~5-10 ç§’
- **ä¸­å‹ä»“åº“** (1000-5000 commits): ~15-30 ç§’
- **å¤§å‹ä»“åº“** (5000-10000 commits): ~30-60 ç§’

*æ—¶é—´å–å†³äºç½‘ç»œé€Ÿåº¦å’Œä»“åº“å¤§å°*

---

## ğŸ”’ å®‰å…¨è¯´æ˜

- âš ï¸ ä»…æ”¯æŒ**å…¬å¼€ä»“åº“**
- âš ï¸ æœªå®ç°è®¤è¯ï¼ˆæœ‰æ„ä¿æŒè½»é‡ï¼‰
- âš ï¸ ä¸´æ—¶ç›®å½•æ¯ 10 åˆ†é’Ÿè‡ªåŠ¨æ¸…ç†
- âš ï¸ ç”Ÿäº§ç¯å¢ƒå»ºè®®æ·»åŠ é™æµ

---

## ğŸš€ æœªæ¥æ”¹è¿›æ–¹å‘

- [ ] æ·»åŠ ä»“åº“ç¼“å­˜æœºåˆ¶
- [ ] æ”¯æŒç§æœ‰ä»“åº“ï¼ˆä½¿ç”¨ tokenï¼‰
- [ ] é›†æˆ GitHub APIï¼ˆæ¯”å…‹éš†æ›´å¿«ï¼‰
- [ ] å¯¼å‡ºä¸º PDF/JSON
- [ ] WebSocket å®æ—¶è¿›åº¦
- [ ] å¤šä»“åº“å¯¹æ¯”
- [ ] å†å²è¶‹åŠ¿åˆ†æ

---

## ğŸ“„ è®¸å¯è¯

éµå¾ªçˆ¶é¡¹ç›®çš„ MIT è®¸å¯è¯

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ­¤æ¨¡å—å®Œå…¨éš”ç¦»åœ¨ `src/log/` ä¸­ï¼Œä¸ä¿®æ”¹ä»»ä½•å¤–éƒ¨æ–‡ä»¶ã€‚

è´¡çŒ®æ­¥éª¤ï¼š
1. ä»…ä¿®æ”¹ `src/log/` å†…çš„æ–‡ä»¶
2. å……åˆ†æµ‹è¯•åŠŸèƒ½
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. æäº¤ PR

---

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜è¯·æ£€æŸ¥ï¼š
1. åç«¯æ§åˆ¶å°æ—¥å¿—
2. å‰ç«¯æµè§ˆå™¨æ§åˆ¶å°
3. ç½‘ç»œè¯·æ±‚ï¼ˆNetwork æ ‡ç­¾ï¼‰
4. æ–‡æ¡£ä¸­çš„å¸¸è§é—®é¢˜éƒ¨åˆ†

---

## ğŸ‰ æ€»ç»“

è¿™æ˜¯ä¸€ä¸ª**å®Œå…¨ç‹¬ç«‹**ã€**æ— ä¾µå…¥**çš„åœ¨çº¿ Git åˆ†ææ¨¡å—ï¼š

âœ… **åç«¯**: å®Œæ•´çš„ Spring Boot REST API æœåŠ¡  
âœ… **å‰ç«¯**: Vue 3 ç»„ä»¶å’Œ TypeScript API å®¢æˆ·ç«¯  
âœ… **æ–‡æ¡£**: å®Œæ•´çš„ä½¿ç”¨å’Œ API æ–‡æ¡£  
âœ… **å·¥å…·**: å¯åŠ¨è„šæœ¬å’Œé…ç½®æ–‡ä»¶  
âœ… **éš”ç¦»**: æ‰€æœ‰ä»£ç åœ¨ `src/log/` å†…ï¼Œé›¶å¤–éƒ¨ä¿®æ”¹  

**å¼€å§‹ä½¿ç”¨**: `cd src/log/backend && mvn spring-boot:run` ğŸš€

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼Happy Coding! ğŸŠ**
